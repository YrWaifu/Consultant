# backend/app/services/news_stub.py
from datetime import date

_NEWS_DB = [
    {
        "id": 1,
        "date_label": "Сегодня",
        "title": "В рекламе энергетиков надо сообщать о вреде их чрезмерного потребления — проект прошёл первое чтение",
        "excerpt": "Согласно поправкам, в рекламе безалкогольных тонизирующих напитков должно быть предупреждение о вреде...",
        "content": [
            "Государственная Дума в первом чтении приняла законопроект о внесении изменений в Федеральный закон «О рекламе». Согласно поправкам, в рекламе безалкогольных тонизирующих напитков должно содержаться предупреждение о вреде их чрезмерного потребления.",
            "Инициатива направлена на защиту здоровья граждан, особенно несовершеннолетних. Медицинские исследования показывают, что избыточное употребление энергетических напитков может негативно влиять на сердечно-сосудистую и нервную системы.",
            "Предупреждение должно занимать не менее 10% площади рекламного объявления и быть выполнено контрастным шрифтом, хорошо читаемым на общем фоне. Требования вступят в силу через 90 дней после официального опубликования закона.",
            "Представители индустрии выразили готовность соблюдать новые требования, отметив важность ответственного маркетинга продукции."
        ]
    },
    {
        "id": 2,
        "date_label": "Сегодня",
        "title": "Новые требования к маркировке нативной рекламы вступят в силу",
        "excerpt": "Регулятор уточнил формат ссылок и правила обозначения рекламных материалов в соцсетях.",
        "content": [
            "ФАС России опубликовала разъяснения о новых требованиях к маркировке нативной рекламы в социальных сетях и на интернет-площадках. Документ вступит в силу с 1 июля текущего года.",
            "Согласно новым правилам, любая реклама должна быть четко обозначена словами «реклама», «рекламный материал» или пометкой «АД». Маркировка должна быть размещена в начале публикации и быть легко различимой.",
            "Особое внимание уделяется интеграциям у блогеров и лидеров мнений. Теперь недостаточно указать пометку в конце длинного текста или хэштегом среди других — она должна быть заметна пользователю сразу.",
            "За нарушение требований предусмотрены административные штрафы: для физических лиц — до 100 тысяч рублей, для юридических — до 500 тысяч рублей.",
            "Эксперты рекомендуют рекламодателям и площадкам пересмотреть свои договоры и шаблоны публикаций заранее, чтобы избежать санкций."
        ]
    },
    {
        "id": 3,
        "date_label": "Вчера",
        "title": "Суды разъяснили ответственность за вводящую в заблуждение скидку",
        "excerpt": "Опубликовано определение по делу об указании завышенной «старой» цены без фактических продаж.",
        "content": [
            "Верховный суд РФ опубликовал определение по резонансному делу о недобросовестной рекламе со скидками. Компания указывала в рекламе значительное снижение цены, однако по «старой» завышенной цене товар фактически никогда не продавался.",
            "Суд постановил, что подобные действия являются введением потребителей в заблуждение относительно реальной выгоды от приобретения товара. Это нарушает как закон «О рекламе», так и закон «О защите прав потребителей».",
            "Согласно разъяснению, скидка может быть указана только в том случае, если товар действительно продавался по более высокой цене в течение разумного периода времени (как правило, не менее 30 дней) перед началом акции.",
            "Компания была оштрафована на 300 тысяч рублей и обязана прекратить распространение подобной рекламы. Кроме того, пострадавшие потребители могут подать иски о компенсации морального вреда.",
            "Данное решение создает важный прецедент для регулирования практики проведения акций и распродаж в российском ритейле."
        ]
    },
]

def list_news(q: str | None = None) -> list[dict]:
    items = [
        {
            "id": x["id"],
            "date_label": x["date_label"],
            "title": x["title"],
            "excerpt": x["excerpt"],
        }
        for x in _NEWS_DB
    ]
    if q:
        ql = q.strip().lower()
        items = [x for x in items if ql in x["title"].lower() or ql in x["excerpt"].lower()]
    return items


def get_news_detail(news_id: int) -> dict | None:
    """Возвращает полную новость по ID"""
    for news in _NEWS_DB:
        if news["id"] == news_id:
            return news
    return None
